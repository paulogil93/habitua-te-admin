var API_URL="API_BASE_URL",ADMIN_API_KEY="ADMIN_API_KEY";$(document).ready(function(){$.ajax({url:"API_BASE_URL/events/news/",type:"GET",dataType:"json",headers:{"X-Api-Key":ADMIN_API_KEY},success:function(a){$("table").bootstrapTable({data:a})}}),$("#deleteBtn").click(function(){var a=document.getElementById("newsID").innerHTML;$.ajax({url:"API_BASE_URL/events/news/",type:"DELETE",dataType:"json",headers:{"X-Api-Key":ADMIN_API_KEY},success:function(a){console.log(a),window.location.reload()},error:function(a){console.log(a)}})}),$("#addBtn").click(function(){var a=document.getElementById("e_title").value,b=document.getElementById("e_description").value,c=new Date,d=(c.getHours()+"").padStart(2,"0"),e=(c.getMinutes()+"").padStart(2,"0"),f=(c.getDate()+"").padStart(2,"0"),g=(c.getMonth()+1+"").padStart(2,"0"),h=c.getFullYear();if(c=h+"-"+g+"-"+f,time=d+":"+e,""==a||""==b)alert("Por favor preencha os campos necess\xE1rios!");else{var i="title="+a+"&description="+b+"&date="+c+"&time="+(time+"&event_type=")+"news";$.ajax({url:"API_BASE_URL/events/news/?"+i,type:"POST",dataType:"json",headers:{"X-Api-Key":ADMIN_API_KEY},success:function(a){clearFields(),console.log(a),window.location.reload()},error:function(a){console.log(a)}})}})});function clearFields(){document.getElementById("e_title").value="",document.getElementById("e_description").value=""}$(function(){$("form").submit(function(){var a=document.getElementById("id").value,b=document.getElementById("title").value,c=document.getElementById("description").value,d=document.getElementById("date").value,e=document.getElementById("time").value;return $.ajax({url:"API_BASE_URL/events/"+a+"/"+"?"+("title="+b+"&description="+c+"&date="+d+"&time="+e+"&event_type="+"news"),type:"PUT",contentType:"application/json",dataType:"json",headers:{"X-Api-Key":ADMIN_API_KEY},async:!1,success:function(a){console.log(a),window.location.reload()},error:function(a){console.log(a)}}),!1})}),window.operateEvents={"click .edit":function(a,b,c){$("#editModal").modal("toggle"),setModal(c)},"click .delete":function(a,b,c){$("#deleteModal").modal("toggle"),product=document.getElementById("deleteNews"),product.innerHTML="Tem a certeza que pretende eliminar a not\xEDcia '"+c.title+"'?",id=document.getElementById("newsID"),id.innerHTML=c.id}};function setModal(a){var b=document.getElementById("id"),c=document.getElementById("title"),d=document.getElementById("description"),e=document.getElementById("date"),f=document.getElementById("time");b.value=a.id,c.value=a.title,d.value=a.description,e.value=formatDate(a.date),f.value=a.time}function formatDate(a){var b=a.split("-")[0],c=a.split("-")[1],d=a.split("-")[2].split(" ")[0];return b+"-"+c+"-"+d}function dateFormatter(a){var b=a.split("-")[0],c=a.split("-")[1],d=a.split("-")[2].split(" ")[0];return d+"-"+c+"-"+b}function imageFormatter(a){return"<img width=\"100px\" height=\"75px\" class=\"rounded\" src=\""+a+"\" />"}function editFormatter(){return"<a class=\"edit\" href=\"javascript:void(0)\" title=\"Editar\"><i class=\"fa fa-edit\"></i></a>  "}function deleteFormatter(){return"<a class=\"delete\" href=\"javascript:void(0)\" title=\"Eliminar\"><i class=\"fa fa-trash text-danger\"></i></a>  "}
